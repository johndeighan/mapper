// Generated by CoffeeScript 2.6.1
// markdown.coffee
var convert;

import {
  marked
} from 'marked';

import {
  assert,
  OL
} from '@jdeighan/coffee-utils';

import {
  debug
} from '@jdeighan/coffee-utils/debug';

import {
  undented
} from '@jdeighan/coffee-utils/indent';

import {
  svelteHtmlEsc
} from '@jdeighan/coffee-utils/svelte';

convert = true;

// ---------------------------------------------------------------------------
export var convertMarkdown = function(flag) {
  convert = flag;
};

// ---------------------------------------------------------------------------
export var markdownify = function(text) {
  var html, result;
  debug(`enter markdownify(${OL(text)})`);
  assert(text != null, "markdownify(): text is undef");
  if (!convert) {
    debug("return original text from markdownify() - not converting");
    return text;
  }
  html = marked.parse(undented(text), {
    grm: true,
    headerIds: false
  });
  debug(`marked returned ${OL(html)}`);
  result = svelteHtmlEsc(html);
  debug(`return ${OL(result)} from markdownify()`);
  return result;
};
