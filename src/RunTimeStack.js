// Generated by CoffeeScript 2.7.0
  // RunTimeStack.coffee
import {
  assert,
  error,
  croak
} from '@jdeighan/unit-tester/utils';

import {
  undef,
  pass,
  defined,
  notdefined,
  OL,
  isString,
  isInteger
} from '@jdeighan/coffee-utils';

import {
  Node
} from '@jdeighan/mapper/node';

// ---------------------------------------------------------------------------
export var RunTimeStack = class RunTimeStack {
  constructor() {
    this.lStack = []; // contains Node objects
    this.len = 0;
  }

  // ..........................................................
  replaceTOS(node) {
    assert(node instanceof Node, "not a Node");
    this.lStack[this.len - 1] = node;
  }

  // ..........................................................
  push(node) {
    assert(node instanceof Node, "not a Node");
    this.lStack.push(node);
    this.len += 1;
  }

  // ..........................................................
  pop() {
    var item;
    assert(this.len > 0, "pop() on empty stack");
    item = this.lStack.pop();
    this.len -= 1;
    return item;
  }

  // ..........................................................
  isEmpty() {
    return this.len === 0;
  }

  // ..........................................................
  nonEmpty() {
    return this.len > 0;
  }

  // ..........................................................
  TOS() {
    if (this.len > 0) {
      return this.lStack[this.len - 1];
    } else {
      return undef;
    }
  }

};
